<html>
<!-- This Demo overlays a rigged hand on top of the existing page.  Requires a WebGL-capable browser. -->
<head>
  <script type="text/javascript" src="examples/lib/three.js"></script>
  <script src="//js.leapmotion.com/leap-0.6.0-beta3_1.js"></script>
  <script src="//js.leapmotion.com/leap-plugins-0.1.4.js"></script>
  <script type="text/javascript" src="build/leap.rigged-hand-0.1.3.js"></script>

  <script id="fragmentShader" type="x-shader/x-fragment">

    uniform float time;
    varying vec2 vUv;

    void main() {
        vec2 position = -1.0 + 2.0 * vUv;

        float red = abs(sin(position.x * position.y + time / 5.0));
        float green = abs(sin(position.x * position.y + time / 4.0));
        float blue = abs(sin(position.x * position.y + time / 3.0 ));
        gl_FragColor = vec4(red, green, blue, 1.0);
    }

  </script>
  <script id="vertexShader" type="x-shader/x-vertex">
      uniform float time;
      varying vec2 vUv;

      void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
  </script>

</head>
<body>

<h1>Rigged Hand - Quickstart</h1>
<p>Bring your hand over the Leap, and you should see it displayed</p>

<script>
  var uniforms = {
                  time: { type: "f", value: 0 },
                  resolution: { type: "v2", value: new THREE.Vector2 }
              };


  var riggedHand;

  (window.controller = new Leap.Controller)
    .use('riggedHand', {
        renderFn: function(){
          uniforms.time.value += 0.1;
          this.renderer.render(this.scene, this.camera);
        }
      })
    .connect()
    .on('riggedHand.meshAdded', function(handMesh){
//        console.log('mesh added', arguments);
//        handMesh.material =  new THREE.ShaderMaterial({
//            uniforms: uniforms,
//            vertexShader: document.getElementById('vertexShader').innerHTML,
//            fragmentShader: document.getElementById('fragmentShader').innerHTML
//        });
//        handMesh.skinning = true;
//        debugger

    });

  riggedHand = controller.plugins.riggedHand;

</script>

</body>
</html>